workflow:
  rules:
    - if: $CI_COMMIT_BRANCH != "main" && $CI_PIPELINE_SOURCE != "merge_request_event"
      when: never
    - when: always
stages:
  - test
  - build
  - push
run_tests:
  stage: test
  before_script:
    - pwd
    - ls
  script:
    - echo "test running..."
run_lintest:
  stage: test
  script:
    - echo "lint test is here ...."    
run_build:
  only:
    - main
  stage: build
  script:
    - echo "build the docker image..."
run_push:
  only:
    - main
  stage: push
  script:
    - echo "push the image to a registry..."
